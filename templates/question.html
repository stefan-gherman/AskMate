{% extends 'base.html' %}

{% block head %}
    <title>{{ questions.title }}</title>
{% endblock head %}

{% block body%}

<div class="top-banner">
    <p>Question: {{ questions.title }}</p>
    <p class="title-info">
        <span>Votes:{{ questions.vote_number }} Views:{{ questions.view_number }}
        Submission Date:{{ questions.submission_time }}</span>
        <a href="{{ url_for('route_add_question_comment', question_id=questions.id ) }}" class="action-button">Comment</a>
        <a href="{{ url_for('route_edit_question', question_id=questions.id) }}" class="action-button">Edit</a>
        <a href="{{ url_for('delete_sql_question', question_id=questions.id) }}" class="action-button">Delete</a>
    </p>
</div>

<div class="question-wrapper">
    <div class="wrapped-votes">
        <a href="{{ url_for('route_question_vote_up', question_id=questions.id) }}" class="vote-button">
            <img src="/static/local_ico/vote-up-button.png">
        </a>
        <br>
        {{ questions.vote_number }}
        <br>
        <a href="{{ url_for('route_question_vote_down', question_id=questions.id) }}" class="vote-button">
                    <img src="/static/local_ico/vote-down-button.png">
        </a>
    </div>
    <div class="wrapped-title">
        {{ questions.message }}
    </div>
    <div class="wrapped-message">
        {% if questions['image'] != '../static/img/' %}
        <img src="{{ questions.image }}" alt="question image" id="image" width="300px" height="300px">
        {% endif %}
    </div>

</div>


<div class="tag-container">
    {% for tag in tags %}
        <span class="tag">
            {{ tag[0]['name'] }}
        </span>
        <span>
            <a
                class="action-button"
                href="{{ url_for('delete_one_tag', question_id = question_id, tag_id = tag[0]['id']) }}"
                >X</a>
        </span>
    {% endfor %}
    <span><a href="{{ url_for('question_tag',question_id=question_id)}}" class="action-button">+</a></span>
</div>
<br>


    <div class="question-comments">
        {% for comment in question_comments %}
            {{ comment.message }}
            {{ comment.submission_time }}<br>
        {% endfor %}
    </div>


    <div class="top-banner">
        <p> Answers</p>
    </div>


{% for answer in answers %}

<div class="question-wrapper">
    <div class="wrapped-votes">
        <a href="{{ url_for('route_answer_vote_up', answer_id=answer.id) }}" class="vote-button">
            <img src="/static/local_ico/vote-up-button.png">
        </a>
        <br>
        {{ answer.vote_number }}
        <br>
        <a href="{{ url_for('route_answer_vote_down', answer_id=answer.id) }}" class="vote-button">
                    <img src="/static/local_ico/vote-down-button.png">
        </a>
        <a href="{{ url_for('route_edit_answer', answer_id = answer.id , question_id = answer.question_id) }}">
            <button class="links">Edit</button></a>

        <a href="{{ url_for('route_accept_answer', answer_id = answer.id) }}">
        Accept
        </a>

        {% autoescape false %}{{ answer.message }}{% endautoescape %}

    </div>

    <div class="wrapped-title">
        {{ answer.message }}
        <span class="title-info">
            <a href="{{ url_for('route_add_answer_comment', answer_id = answer.id) }}" class="action-button">Comment</a>
            <a href="{{ url_for('route_edit_answer', answer_id = answer.id , question_id = answer.question_id) }}" class="action-button">Edit</a>
            <a href="{{ url_for('delete_sql_answer', answer_id = answer.id) }}" class="action-button">Delete</a>
        </span>
    </div>

    <div>
        {% if answer.image != '../static/img/' %}
            <img src="{{ answer.image }}" alt="question image" id="image" width="300px" height="300px">
        {% endif %}
    </div>

</div>

{% endfor %}

<div class="centered-content">
    <a href="{{ url_for('route_add_answer', question_id = question_id) }}" class="add-content-button">Answer Question</a>
</div>

{% endblock body %}
